{
TCanvas*c1 = new TCanvas("c1","KS test canvas",1);
TFile*f3 = new TFile("mc175_ttopvh.root");
TFile*f2 = new TFile("bhmu0d_iso.root");
TFile*f1 = new TFile("mcWmu_ltop1q.root");
TFile*f  = new TFile("bhmu0d_noniso_3jbin.root");
TH1F*Ptb = (TH1F*)f->Get("PtB");
TH1F*Pt10= (TH1F*)f1->Get("CMUP/>=3j/lep_Et");
TH1F*Pt11= (TH1F*)f1->Get("CMX/>=3j/lep_Et");
TH1F*Pt20= (TH1F*)f2->Get("CMUP/>=3j/lep_Et");
TH1F*Pt21= (TH1F*)f2->Get("CMX/>=3j/lep_Et");
TH1F*Pt30= (TH1F*)f3->Get("CMUP/>=3j/lep_Et");
TH1F*Pt31= (TH1F*)f3->Get("CMX/>=3j/lep_Et");
TH1F*Pt4 = new TH1F("Pt4", "Muon Pt", 40, 0., 200.);
TH1F*Pt5 = new TH1F("Pt5", "Muon Pt", 40, 0., 200.);
TH1F*Pt6 = new TH1F("Pt6", "Muon Pt", 40, 0., 200.);
Int_t fakemuons = TMath::Nint(0.12*(Pt10->GetEntries()+Pt11->GetEntries()));
Int_t cmupttbar = TMath::Nint(0.2*Pt10->GetEntries());
Int_t cmxttbar  = TMath::Nint(0.2*Pt11->GetEntries());
cout<<"# of fakes: "<<fakemuons<<"\t"<<"# of CMUP from top pairs: "<<cmupttbar<<"\t"<<"# of CMX from top pairs: "<<cmxttbar<<endl;
Pt4->FillRandom(Pt30,cmupttbar);
Pt5->FillRandom(Pt31,cmxttbar);
Pt6->FillRandom(Ptb,fakemuons);
Pt10->Add(Pt11);
Pt5->Add(Pt4);
Pt10->Add(Pt5);
Pt10->Add(Pt6);
Pt10->Rebin();
Pt20->Add(Pt21);
Pt20->Rebin();
l0 = new TLine(100,29,120,29);
l1 = new TLine(100,25,120,25);
l2 = new TLine(100,21,120,21);
l3 = new TLine(100,17,120,17);
p0 = new TPaveLabel(124,27,154,31,"Fakes");
p1 = new TPaveLabel(127,23,158,27,"MC  Top");
p2 = new TPaveLabel(126,19,186,23,"MC  Top + Bkgd");
p3 = new TPaveLabel(125,15,150,19,"Data");
p4 = new TPaveLabel(95,11,190,15,"KS  Probability  =  0.90");
Pt20->SetTitle("Q^{2}  =  M_{W}^{2}");
Double_t prob = Pt10->KolmogorovTest(Pt20);
cout<<"KS probability: "<<prob<<endl;
Pt20->GetXaxis()->SetTitle("p_{T} (GeV/c)");
Pt20->GetYaxis()->SetTitle("Muons");
Pt20->SetLineColor(4);
Pt20->SetLineWidth(2);
Pt20->Draw("EP");
Pt5->Scale(Pt20->GetEntries()/Pt10->GetEntries());
Pt5->SetLineColor(8);
Pt5->SetLineWidth(3);
Pt5->Draw("histo,same");
Pt6->Scale(Pt20->GetEntries()/Pt10->GetEntries());
Pt6->SetLineColor(6);
Pt6->SetLineWidth(3);
Pt6->Draw("histo,same");
Pt10->Scale(Pt20->GetEntries()/Pt10->GetEntries());
Pt10->SetLineColor(2);
Pt10->SetLineWidth(3);
Pt10->Draw("histo,sames");
l0->SetLineColor(6);
l0->SetLineWidth(3);
l0->Draw("same");
l1->SetLineColor(8);
l1->SetLineWidth(3);
l1->Draw("same");
l2->SetLineColor(2);
l2->SetLineWidth(3);
l2->Draw("same");
l3->SetLineColor(4);
l3->SetLineWidth(2);
l3->Draw("same");
p0->SetBorderSize(0);
p0->Draw("same");
p1->SetBorderSize(0);
p1->Draw("same");
p2->SetBorderSize(0);
p2->Draw("same");
p3->SetBorderSize(0);
p3->Draw("same");
p4->SetBorderSize(0);
p4->Draw("same");
}
